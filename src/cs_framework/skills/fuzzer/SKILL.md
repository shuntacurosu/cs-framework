---
name: Fuzzer
description: Tools for running test scenarios and fuzzing the application.
version: 1.0.0
---

# Overview
The Fuzzer skill allows you to execute predefined scenarios (sequences of actions) against the application to verify behavior or test edge cases.

# Usage
Use this skill when you need to:
- Verify that a specific sequence of actions leads to the expected state.
- Reproduce a bug by running a specific scenario.
- Stress-test the system with "evil" sequences generated by the LLM.

# Tools

## run_scenario
Executes a scenario defined in a YAML or JSON file against the application.

**Parameters:**
- `setup_file` (string, required): Path to a Python file that initializes the application. This file must export a `runner` variable or a `get_runner()` function.
- `scenario_file` (string, required): Path to the YAML/JSON file defining the scenario.

**Scenario File Format:**
The scenario file should be a list of steps. Each step is a dictionary.

Supported step types:
- `dispatch`: Trigger an action on a concept.
  - `target`: Concept name.
  - `action`: Action name.
  - `payload`: (Optional) Arguments for the action.
- `assert_state`: Verify the state of a concept.
  - `target`: Concept name.
  - `expected_state`: Dictionary of expected key-value pairs.
- `wait`: Wait for a number of ticks (logical time).
  - `ticks`: Number of ticks.

**Example Scenario (YAML):**
```yaml
- type: dispatch
  target: TetrisGame
  action: start_game
  payload: {}

- type: dispatch
  target: InputSystem
  action: press_left
  payload: {}

- type: assert_state
  target: TetrisBoard
  expected_state:
    current_piece_x: 4
```

**Example Usage:**
```python
run_scenario(
    setup_file="app_setup.py",
    scenario_file="tests/scenarios/evil_move.yaml"
)
```
